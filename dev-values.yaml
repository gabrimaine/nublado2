jupyterhub:
  debug:
    enabled: true

  hub:
    image:
      name: lsstsqre/nublado2
      tag: dev
      pullPolicy: Never

    extraConfig:
      nublado.py: |
        import nublado2.hub_config
        nublado2.hub_config.HubConfig().configure(c)

  singleuser:
    storage:
      type: none
    extraVolumes:
      - name: home
        emptyDir: {}
    extraVolumeMounts:
      - name: home
        mountPath: /home


  ingress:
    hosts: ["minikube.lsst.codes"]
    annotations:
      nginx.ingress.kubernetes.io/auth-signin: "https://minikube.lsst.codes/login"
      nginx.ingress.kubernetes.io/auth-url: "http://gafaelfawr-service.gafaelfawr.svc.cluster.local:8080/auth?scope=exec:notebook"

config:
  options_form:
    images_url: "http://cachemachine.cachemachine.svc.cluster.local/cachemachine/jupyter/available"
    images: []
    sizes:
      - name: Tiny
        cpu: .5
        ram: 1536M
      - name: Small
        cpu: 1
        ram: 3072M
      - name: Medium
        cpu: 2
        ram: 6144M
      - name: Large
        cpu: 4
        ram: 12288M
  use_auth_uid: False
  user_resources:
    - apiVersion: v1
      kind: Namespace
      metadata:
        name: "n2-dev-{{user}}"
    - apiVersion: v1
      kind: ConfigMap
      metadata:
        name: lab-environment
        namespace: "n2-dev-{{user}}"
      data:
        EXTERNAL_INSTANCE_URL: https://minikube.lsst.codes
        FIREFLY_ROUTE: /portal/app
        HUB_ROUTE: /n2
        JS9_ROUTE: /js9
        API_ROUTE: /api
        TAP_ROUTE: /api/tap
        SODA_ROUTE: /api/image/soda
        WORKFLOW_ROUTE: /wf
        AUTO_REPO_URLS: https://github.com/lsst-sqre/notebook-demo
        NO_SUDO: "true"
        EXTERNAL_GROUPS: "{{groups}}"
        EXTERNAL_UID: "{{uid}}"
        ACCESS_TOKEN: "{{token}}"

vault_secret_path: "secret/k8s_operator/minikube.lsst.codes/nublado2"
